(()=>{"use strict";!function(e){const t=document.createElement("div");t.className="card";const n=document.createElement("div");n.className="search";const c=document.createElement("input");c.type="text",c.placeholder="enter city name",c.spellcheck="false";const a=document.createElement("button");a.innerHTML="search";const r=document.createElement("div");r.className="weather";const l=document.createElement("img");l.src="./images/map.png",l.className="city-map";const o=document.createElement("h1");o.className="temp";const i=document.createElement("h2");i.innerText="Ufa",i.className="city";const s=document.createElement("div");s.id="list",n.appendChild(c),n.appendChild(a),r.appendChild(l),r.appendChild(o),r.appendChild(i),t.appendChild(n),t.appendChild(r),t.appendChild(s),e.appendChild(t)}(document.querySelector("body")),function(e){const t=document.createElement("link");t.rel="stylesheet",t.href="style.css",e.appendChild(t)}(document.getElementsByTagName("head")[0]);const e=document.querySelector(".search input"),t=document.querySelector(".search button"),n=document.querySelector(".city-map"),c=document.querySelector("#list");async function a(e){try{const t=await fetch("https://api.openweathermap.org/data/2.5/weather?units=metric&q="+e+"&appid=6c747baf75682efc7b620568f3236f69"),c=await t.json();document.querySelector(".city").innerHTML=c.name,document.querySelector(".temp").innerHTML=`${Math.round(c.main.temp)}°C`,n.src=`https://static-maps.yandex.ru/v1?spn=0.316457,0.00619&l=map&size=200,200&ll=${c.coord.lon},${c.coord.lat}&apikey=8dd53d90-bf9b-4ee4-ac9d-86c1dabd0561`}catch(e){return null}}async function r(e){function t(e){localStorage.setItem("item",JSON.stringify(e))}function n(e,t){e.innerHTML=`<ol>${t.map((e=>`<li>${e}</li>`)).join("")}</ol>`}const a=await async function(){try{const e=JSON.parse(localStorage.getItem("item"));return null===e?[]:e}catch(e){return null}}();if(e)if(a.length>=10){a.splice(0,a.length-9),a.push(e),t(a);try{n(c,a)}catch{return null}}else{a.push(e),t(a);try{n(c,a)}catch{return null}}else try{n(c,a)}catch{return null}}!async function(){try{const e="https://api.openweathermap.org/data/2.5/weather?units=metric&q=Ufa&appid=6c747baf75682efc7b620568f3236f69",t=await fetch(e),n=await t.json();document.querySelector(".temp").innerHTML=`${Math.round(n.main.temp,0)}°C`}catch(e){return null}}(),r(),window.onload=function(){t.addEventListener("click",(()=>{a(e.value),r(e.value)}))},c&&(c.onclick=function(e){const{target:t}=e;a(t.innerHTML)})})();